<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NiceGram Helper</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: 'Segoe UI', sans-serif;
            background: radial-gradient(circle, #002200 0%, #000000 100%); /* Темно-зеленый градиент в черный */
            color: white; display: flex; align-items: center; justify-content: center;
        }

        /* Контейнер для вращающихся фото */
        .bg-container {
            position: fixed; top: 50%; left: 50%;
            width: 150vmax; height: 150vmax;
            margin-top: -75vmax; margin-left: -75vmax;
            z-index: -1;
            animation: rotateBg 16.6s linear infinite; /* Скорость 0.6x (базовая ~10с / 0.6) */
            opacity: 0.65; /* Прозрачность 65% */
            display: flex; flex-wrap: wrap; justify-content: space-around; align-content: space-around;
        }

        @keyframes rotateBg {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .bg-container img {
            width: 300px; height: 300px;
            object-fit: cover; border-radius: 20px;
            box-shadow: 0 0 30px 10px rgba(0, 100, 255, 0.8); /* Синее свечение */
            margin: 20px;
        }

        /* Интерфейс */
        .content {
            background: rgba(0, 0, 0, 0.7);
            padding: 30px; border-radius: 20px; text-align: center;
            backdrop-filter: none; /* Без эффекта размытия */
            border: 1px solid #004400; width: 80%;
        }

        /* Капча-курсор */
        #captcha-area { margin: 20px 0; }
        .slider-container {
            width: 100%; background: #222; height: 10px; border-radius: 5px; position: relative;
        }
        #cursor {
            font-size: 30px; transition: transform 0.2s;
            display: inline-block; margin-bottom: 10px;
        }
        input[type=range] { width: 100%; cursor: pointer; }

        .hidden { display: none; }

        button {
            background: #0088cc; color: white; border: none;
            padding: 12px 24px; border-radius: 10px; font-size: 16px;
            cursor: pointer; transition: 0.3s;
        }
        button:hover { background: #00aaff; }
    </style>
</head>
<body>

    <div class="bg-container">
        <!-- Дублируем фото для заполнения пространства -->
        <img src="https://yt3.googleusercontent.com/v5uMoct16G7gneNFzOx71EZHam15nxmcxpcovXNMRMM0UtxsGq0IWn5ZcLmQ0pGgOIuGHBSTmFY=s900-c-k-c0x00ffffff-no-rj">
        <img src="https://i.getgems.io/TBlXd0AGxwweh_orE0Cj8J_wMTVDeGDzkp0KaC6lcVk/rs:fill:1000:0:1/g:ce/czM6Ly9nZXRnZW1zLXMzL25mdC1jb250ZW50LWNhY2hlL2ltYWdlcy9FUUNXaDFsUGx0eVR3Q1d4Q1htNHVtTDV0UFpvWFI4a1RJY1QtcGQwSnFvYWRMSG8vODMwMWE1NTIwYWJlMDkyZA">
        <img src="https://i.getgems.io/FIFF8-gSDSLwn7eJ2h6_Z93zNCrLk_8Mm0DpXS6VJTU/rs:fill:1000:0:1/g:ce/czM6Ly9nZXRnZW1zLXMzL25mdC1jb250ZW50LWNhY2hlL2ltYWdlcy9FUUQ5aWtacTZ4UGdLanptZEJHMEcwUzgwUnZVSmpid2dIclBaWERLY193c0U4NHcvOTU4NzA1Mjc1OTBiNzJiOQ">
        <img src="https://cache.tonapi.io/imgproxy/emGFD8G3jt41AkBJLS2ygiHlTP20aCPP_tN0O7j_9aA/rs:fill:1500:1500:1/g:no/aHR0cHM6Ly9uZnQuZnJhZ21lbnQuY29tL2dpZnQvY3J5c3RhbGJhbGwtNDk0LndlYnA.webp">
        <img src="https://i.getgems.io/JPLdyQ18jDump5MEqq7XSz-ACNhOIcB3j__Fu4YoBls/rs:fill:500:500:1/g:ce/czM6Ly9nZXRnZW1zLXMzL25mdC1jb250ZW50LWNhY2hlL2ltYWdlcy9FUURJUmVsZU9rVHhDRDRnX1hFbTh4ajBMWU5nNi16TXNUR0FBd0NBLXZFYmtHQnUvOWM4MDk4NjQwNmU4MjFlMg">
        <img src="https://static6.tgstat.ru/channels/_0/7c/7c8536637e62010b627a43f09fe8a469.jpg">
    </div>

    <div class="content">
        <div id="verify-step">
            <h3>Проверка на человека</h3>
            <p>Поверните курсор вправо</p>
            <div id="cursor">⬆️</div>
            <input type="range" id="slider" min="0" max="90" value="0">
            <br><br>
            <button onclick="checkVerify()">Подтвердить</button>
        </div>

        <div id="main-app" class="hidden">
            <h2 id="welcome-msg"></h2>
            <button onclick="document.getElementById('fileInput').click()">Отправить файл</button>
            <input type="file" id="fileInput" class="hidden" onchange="sendFile(this)">
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const slider = document.getElementById('slider');
        const cursor = document.getElementById('cursor');

        slider.oninput = function() {
            cursor.style.transform = `rotate(${this.value}deg)`;
        };

        function checkVerify() {
            if (slider.value >= 80) {
                document.getElementById('verify-step').classList.add('hidden');
                document.getElementById('main-app').classList.remove('hidden');
                document.getElementById('welcome-msg').innerText = `Добро пожаловать, ${tg.initDataUnsafe.user?.first_name || 'Пользователь'}`;
            } else {
                alert("Поверните курсор вправо до конца!");
            }
        }

        function sendFile(input) {
            const file = input.files[0];
            if (file) {
                // В Mini App мы не можем отправить файл напрямую через бота без бэкенда.
                // Поэтому мы отправляем уведомление боту, что файл выбран.
                tg.sendData(JSON.stringify({
                    action: "file_sent",
                    fileName: file.name
                }));
                alert("Внимание: Из соображений безопасности Telegram, пожалуйста, отправьте этот файл боту в чат. Бот уже готов его принять.");
            }
        }
    </script>
</body>
</html>
